package by.hut.flat.calendar.core.DBAdapter.tables;

import android.database.Cursor;
import by.hut.flat.calendar.core.DBAdapter.DBAdapter;

public class State extends Table{
	public static final String NAME = "state";
	public static final String CREATE = "CREATE TABLE " + NAME + " (" +
			"sid integer," +
			"am integer NOT NULL," +
			"pm integer NOT NULL," +
			"settlement integer NOT NULL," +
			"eviction integer NOT NULL," +
			"CONSTRAINT state_pkey PRIMARY KEY (sid)" +
		");";
	public static final String[] DB = {
		"sid",				// 0
		"am",				// 1
		"pm",				// 2
		"settlement",		// 3
		"eviction"			// 4
	};
	public static final int SID = 0, AM = 1, PM = 2, SETTLEMENT = 3, EVICTION = 4;
			
	public static final Integer INSERT[][] = {
			{0,1,2,3,4,5,6,7,8,1,2,2,3,4,4,5,7,5,6,6,6,7,7,8,8,8,2,2,2,4,4,4,5,6,7,8,6,7,8,7,8,6,7,8,6,8,6,6,7,7,8,8,8,8,0,1,2,0,3,4,1,2,3,4,5,5,6,6,7,7,8,1,2,3,4,1,3,2,2,4,4,5,7,5,6,5,6,6,6,7,7,7,8,8,8,2,2,4,4,2,4,2,2,4,4,5,6,7,8,6,7,8,5,6,7,8,6,7,8,6,6,6,6,7,7,7,7,8,8,8,8,0,1,2,0,3,4,0,0,0,0,1,1,1,2,2,3,3,3,4,4,5,5,5,6,6,6,7,7,8,8,1,2,3,4,1,3,1,1,1,1,2,2,2,3,3,3,3,4,4,4,5,7,5,6,5,5,5,6,6,6,7,7,7,8,8,8,2,4,2,4,2,2,2,2,4,4,4,4,6,5,7,8,5,6,7,8,5,5,5,5,6,6,6,6,7,7,7,7,8,8,8,8},
			{0,1,2,3,4,5,6,7,8,0,1,2,0,3,4,1,2,3,4,5,6,5,7,6,7,8,0,1,2,0,3,4,0,0,0,0,1,1,1,2,2,3,3,3,4,4,5,6,5,7,5,6,7,8,1,2,2,3,4,4,5,7,5,6,6,7,6,8,7,8,8,1,2,3,4,3,1,5,7,5,6,2,2,4,4,5,6,7,8,6,7,8,6,7,8,1,2,3,4,3,1,5,7,5,6,1,1,1,1,2,2,2,3,3,3,3,4,4,4,5,6,7,8,5,6,7,8,5,6,7,8,2,2,2,4,4,4,5,6,7,8,6,7,8,7,8,6,7,8,6,8,6,7,8,7,6,8,7,8,7,8,2,2,4,4,4,2,5,6,7,8,6,7,8,5,6,7,8,6,7,8,2,2,4,4,6,7,8,6,7,8,6,7,8,6,7,8,2,4,4,2,5,6,7,8,5,6,7,8,2,2,2,2,4,4,4,4,5,6,7,8,5,6,7,8,5,6,7,8,5,6,7,8},
			{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2},
			{0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2}
	};
	
	/*------------------------------------------------------------
	-------------------- C O N S T R U C T O R S -----------------
	------------------------------------------------------------*/
	public State(DBAdapter adapter) {
		super(adapter, NAME, CREATE, DB);
	}
	
	@Override
	public void insert() throws TableNotExistsException{
		this.bulkInsert(new int[]{AM,PM,SETTLEMENT,EVICTION}, INSERT, "int");
	}
	
	/**
	 * Gets day state according to am, pm, sett, evict
	 * @param am
	 * @param pm
	 * @param sett
	 * @param evict
	 * @return
	 */
	public int getNewDayState(int am, int pm, int sett, int evict){
    	Cursor cursor = db.getDB().query(NAME, new String[]{DB[SID]},"am = ? AND pm = ? AND settlement = ? AND eviction = ?", new String[]{""+am,""+pm,""+sett,""+evict}, null, null, null);
    	if (cursor.moveToFirst()) return cursor.getInt(0)-1;
    	else return -1;
    }
	
}
